
# FILE .\main.py

# FUNC main
def main():
    data = scan_py_files(ROOT)
    if not data:
        print("Keine Python-Dateien mit Funktionen gefunden.")
        return

    files = list(data.keys())
    sel_files = choose(files, "Dateien:")

    out = []

    for f in sel_files:
        entry = data[f]
        fnames = [x["name"] for x in entry["funcs"]]
        sel_funcs = choose(fnames, f"Funktionen in {f}:")

        out.append(f"\n# FILE {f}")

        for func in entry["funcs"]:
            if func["name"] in sel_funcs:
                out.append(f"\n# FUNC {func['name']}")
                out.append(entry["code"][func["pos"]:])

    with open("gpt_bundle.txt", "w", encoding="utf-8") as fh:
        fh.write("\n".join(out))

    print("\nâœ… gpt_bundle.txt erstellt")

if __name__ == "__main__":
    main()
